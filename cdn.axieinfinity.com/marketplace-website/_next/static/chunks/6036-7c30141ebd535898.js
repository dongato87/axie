(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6036],{93834:function(e,c,d){"use strict";var b,a;d.d(c,{e:function(){return b}}),(a=b||(b={})).Idle="idle",a.Requesting="requesting",a.Success="success",a.Error="error"},54695:function(c,b,a){"use strict";a.d(b,{P:function(){return g}});var d=a(18499),e=a(89181);function f(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}var g=function(){var a,b,c=(a=(0,d.Db)(e.lR),b=1,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||function(a,c){if(a){if("string"==typeof a)return f(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return f(a,c)}}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return{logActivity:function(a,b){return c({variables:{action:a,data:b}})}}}},55153:function(d,b,a){"use strict";a.d(b,{Hp:function(){return j},M5:function(){return h},S:function(){return i},iQ:function(){return k}});var c=a(69016),e=a.n(c),f=a(96486),g=a(63169),h=function(a){return a===g.y.Axie?"axie":a===g.y.Bundle?"bundle":a===g.y.Item?"land item":a===g.y.Land?"land plot":""},i=function(a,b){return b/(a||.01)<=100},j=function(a){if((0,f.isEmpty)(a)||(null==a?void 0:a.basePrice)===(null==a?void 0:a.endedPrice))return!0;var b=parseFloat((null==a?void 0:a.basePrice)||"0"),c=parseFloat((null==a?void 0:a.endedPrice)||"0");return i(b,c)},k=function(a){if(!a)return 0;var b=new(e())(a),c=e().mul(a,.0425);return e().sub(b,c).toNumber()}},63169:function(l,d,a){"use strict";a.d(d,{z:function(){return T},y:function(){return c}});var b,c,e=a(34051),m=a.n(e),n=a(85893),o=a(22169),p=a(66006),q=a(75079),r=a(96504),s=a(89275),f=a(13550),t=a.n(f),g=a(94184),u=a.n(g),v=a(76614),w=a(48043),x=a(69463),h=a(14293),y=a.n(h),z=a(2729),i=a(30381),A=a.n(i),B=a(67294),C=a(12204),D=a(84245),E=a(48701),F=a(54695),G=a(85433),H=a(96627),I=a(96486),J=function(a){var d=a.showDepositAction,c=a.onClose,b=a.errorMessage,e=!(0,I.isNil)(b);return(0,n.jsxs)(H.V,{size:"medium",title:"Auction Message",visible:e,onClose:c,children:[(0,n.jsx)("h4",{className:"mt-20 text-center text-20 leading-24",children:"Purchase failed!"}),(0,n.jsx)("h6",{className:"mt-8 text-center text-gray-1 text-14 leading-20",children:null!=b?b:""}),(0,n.jsxs)("div",{className:"mt-20 flex justify-center",children:[d&&(0,n.jsx)("div",{className:"mr-12",children:(0,n.jsx)(q.zx,{intent:r.S.Primary,onClick:function(){c(),window.open("https://bridge.axieinfinity.com/deposit","_blank")},text:"Deposit"})}),(0,n.jsx)(q.zx,{onClick:c,text:"Close"})]})]})},j=a(78155),K=a.n(j),L=a(1437),M=a(38579),N=function(a){var c=a.validated,b=a.isLoggedIn,d=a.isValidAuctionPrice,e=a.itemType,f=a.onBuyNow;return b?(0,n.jsx)(q.zx,{className:K().BuyNowButton,intent:r.S.Primary,disabled:!b||!1===c||!d,onClick:f,text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:"/static/image/ronin-logo-white.png",className:"mr-8",width:14,alt:"Ronin Logo"}),(0,n.jsx)("div",{children:"Buy now"})]})}):(0,n.jsx)(M.u,{target:(0,n.jsx)(q.zx,{className:K().BuyNowButton,disabled:!0,text:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:"/static/image/ronin-logo-white.png",className:"mr-8",width:14,alt:"Ronin Logo"}),(0,n.jsx)("div",{children:"Buy now"})]})}),children:(0,n.jsxs)("div",{children:["Please login to buy this\xa0",(0,n.jsx)("span",{className:"capitalize",children:e.toLowerCase()})]})})},k=a(21797),O=a.n(k),P=function(a){var b,c,d,f=a.isAuctionOver,g=a.endedAt,h=a.basePrice,e=a.durationProgress,i=a.endedPrice;return f?null:(0,n.jsxs)("div",{className:O().Container,children:[(0,n.jsx)("div",{className:O().Duration,children:(0,n.jsx)("div",{children:A().unix(parseInt(g.toString(),10)).fromNow()})}),(0,n.jsxs)("div",{className:O().Slider,children:[(0,n.jsxs)("div",{className:O().StartPrice,children:["\u039E\xa0",(0,E._9)(h)]}),(0,n.jsxs)("div",{className:O().LineContainer,children:[(0,n.jsx)("div",{className:u()(O().Dot,O().Active)}),(0,n.jsx)("div",{className:O().Line,children:(0,n.jsx)("div",{className:O().Status,style:{width:"".concat(e,"%")}})}),(0,n.jsx)("div",{className:u()(O().Dot,(b={},c=O().Active,d=e>=100,c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b))})]}),(0,n.jsxs)("div",{className:O().EndPrice,children:["\u039E\xa0",(0,E._9)(i)]})]})]})};function Q(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function R(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){Q(g,e,f,d,h,"next",a)}function h(a){Q(g,e,f,d,h,"throw",a)}d(void 0)})}}function S(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}(b=c||(c={})).Axie="axie",b.Land="land",b.Item="item",b.Bundle="bundle",b.Rune="rune",b.Charm="charm";var T=function(a){var f,Y,Z,i=(0,G.I)(),$=i.dialog,_=i.openTransactionSubmission,aF=a.tokenId,aa=a.owner,ab=a.itemType,ac=a.isValidAuctionPrice,d=a.order,e=(0,v.ec)().profile,aG=(0,F.P)().logActivity,j=(0,B.useState)(!0),k=j[0],aH=j[1],l=(0,B.useState)(!1),ad=l[0],aI=l[1],H=(0,B.useState)(),ae=H[0],aJ=H[1],I=(0,B.useState)(!1),af=I[0],aK=I[1],M=(0,z.j)(),ag=M.dialog,ah=M.checkForUnlocked,b=(0,C.O)(a,{referralAddress:null==e?void 0:null===(f=e.referral)||void 0===f?void 0:f.address,openTransactionSubmission:_}),ai=b.errorBuy,aj=b.isShowBuyNowDialog,ak=b.tokensBalance,al=b.buyRequestStatus,am=b.onChangeSelectToken,an=b.onCloseBuyNowDialog,ao=b.onClickBuyNow,ap=b.onConfirmBuyNow,g=(0,D.N)(),aL=g.cancelOrder,aM=g.checkOrderValid,aq=g.marketGatewayContract,ar=d.id,O=d.endedAt,as=d.startedAt,Q=d.basePrice,h=d.endedPrice,at=d.currentPrice,au=d.currentPriceUsd,av=new(t())(as),T=new(t())(O),aw=T.sub(av),U=T.sub(new(t())(A().now()/1e3)),ax=!y()(e),V=U.lt(new(t())(0)),ay=new(t())(h).lte(new(t())(0)),az=parseInt(U.mul(new(t())(100)).div(aw).toString(),10),W=(null==e?void 0:e.addresses.ronin)===aa,X=function(a){return function(b){if(ah())return a(b)}},aN=(Y=R(m().mark(function a(){var b;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.warn("validate-auction-".concat(ar)),!(y()(d)||y()(ar))){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,a.next=6,aM(d);case 6:aH(b=a.sent),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(3),console.log("Error while revalidating auction."),console.error(a.t0),aH(!1);case 15:case"end":return a.stop()}},a,null,[[3,10]])})),function(){return Y.apply(this,arguments)});(0,B.useEffect)(function(){aq&&aN()},[ar,aq]);var aA,aB,aC,aD,aO=(Z=R(m().mark(function b(){var c,d;return m().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=a.itemData.order){b.next=3;break}return b.abrupt("return",Promise.reject("Order info not found."));case 3:return b.next=5,aL(c);case 5:if(!(d=b.sent)){b.next=10;break}return b.next=9,aG(x.aU.UnlistBundle,{listingIndex:c.id,txHash:d.hash});case 9:return b.abrupt("return",d.hash);case 10:return b.abrupt("return",Promise.reject("Something went wrong."));case 11:case"end":return b.stop()}},b)})),function(){return Z.apply(this,arguments)}),aP=(aA=R(m().mark(function b(){var c,d,e,f,g;return m().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=(c=a.itemData).row,e=c.col,f=c.order){b.next=3;break}return b.abrupt("return",Promise.reject("Order info not found."));case 3:return b.next=5,aL(f);case 5:if(!(g=b.sent)){b.next=10;break}return b.next=9,aG(x.aU.UnlistLand,{row:d,col:e,txHash:g.hash});case 9:return b.abrupt("return",g.hash);case 10:return b.abrupt("return",Promise.reject("Something went wrong."));case 11:case"end":return b.stop()}},b)})),function(){return aA.apply(this,arguments)}),aQ=(aB=R(m().mark(function b(){var c,d,e,f,g;return m().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=(c=a.itemData).itemAlias,e=c.itemId,f=c.order){b.next=3;break}return b.abrupt("return",Promise.reject("Order info not found."));case 3:return b.next=5,aL(f);case 5:if(!(g=b.sent)){b.next=10;break}return b.next=9,aG(x.aU.UnlistItem,{tokenId:e,itemAlias:d,txHash:g.hash});case 9:return b.abrupt("return",g.hash);case 10:return b.abrupt("return",Promise.reject("Something went wrong."));case 11:case"end":return b.stop()}},b)})),function(){return aB.apply(this,arguments)}),aR=(aC=R(m().mark(function b(){var c,d;return m().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=a.itemData.order){b.next=3;break}return b.abrupt("return",Promise.reject("Order info not found."));case 3:return b.next=5,aL(c);case 5:if(!(d=b.sent)){b.next=10;break}return b.next=9,aG(x.aU.UnlistAxie,{axieId:aF,txHash:d.hash});case 9:return b.abrupt("return",d.hash);case 10:return b.abrupt("return",Promise.reject("Something went wrong."));case 11:case"end":return b.stop()}},b)})),function(){return aC.apply(this,arguments)}),aE=(aD=R(m().mark(function a(b){var d;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.preventDefault(),a.prev=1,d="",a.t0=ab,a.next=a.t0===c.Axie?6:a.t0===c.Land?10:a.t0===c.Item?14:a.t0===c.Bundle?18:22;break;case 6:return a.next=8,aR();case 8:return d=a.sent,a.abrupt("break",22);case 10:return a.next=12,aP();case 12:return d=a.sent,a.abrupt("break",22);case 14:return a.next=16,aQ();case 16:return d=a.sent,a.abrupt("break",22);case 18:return a.next=20,aO();case 20:return d=a.sent,a.abrupt("break",22);case 22:_({txHash:d,message:"Transaction submitted successfully."}),a.next=28;break;case 25:a.prev=25,a.t1=a.catch(1),console.error("[Cancel_Selling_Error]",a.t1);case 28:case"end":return a.stop()}},a,null,[[1,25]])})),function(a){return aD.apply(this,arguments)});return(0,n.jsxs)(n.Fragment,{children:[$,(0,n.jsxs)("div",{className:K().AuctionInfoContainer,children:[!ay&&(0,n.jsx)(o.J2,{isOpen:af,placement:"right-start",onOutsideClick:function(){return aK(!1)},triggerElement:(0,n.jsxs)("div",{onClick:function(){return aK(!0)},className:u()(K().Detail,S({},K().Hide,!V)),children:[(0,n.jsx)(s.j,{className:K().Icon,size:16}),"Auction info"]}),children:(0,n.jsx)(L.Z,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){S(d,a,c[a])})}return d}({},a))}),Q!==h&&(0,n.jsx)(P,{endedPrice:h,endedAt:O,basePrice:Q,isAuctionOver:V,durationProgress:Math.min(100-az,100)}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(p.Z.Heading,{level:"4",className:K().CurrentPrice,children:["\u039E\xa0",(0,E._9)(at,4)]}),(0,n.jsxs)(p.Z.Text,{bold:!0,level:"1",className:K().CurrentPriceUsd,children:["$",(0,E.xG)(au,2)]})]}),!W&&(0,n.jsx)(N,{validated:k,isLoggedIn:ax,isValidAuctionPrice:ac,itemType:ab,onBuyNow:X(ao)}),W&&(0,n.jsx)("div",{className:K().CancelButton,children:(0,n.jsx)(q.zx,{intent:r.S.Danger,onClick:X(aE),text:"Cancel Selling"})})]}),!k&&(0,n.jsx)(p.Z.Text,{intent:r.S.Primary,className:K().WarningMessage,children:"This auction is no longer available. Please try again later."}),(0,n.jsx)(J,{showDepositAction:ad,onClose:function(){aI(!1),aJ(void 0)},errorMessage:ae}),a.order&&(0,n.jsx)(w.e,{data:a.order,isOpen:aj,itemData:a.itemData,itemType:a.itemType,errorBuy:ai,buyRequestStatus:al,tokensBalance:ak,checkUnlockedRoninWallet:ah,onClose:an,onConfirm:ap,onSelectToken:am}),ag]})}},1437:function(e,b,a){"use strict";var f=a(85893),c=a(13550),g=a.n(c),d=a(30381),h=a.n(d);a(67294);var i=a(48701);b.Z=function(b){var a=b.order,c=a.basePrice,d=a.endedPrice,e=a.startedAt,j=a.endedAt,k=new(g())(e),l=new(g())(j),m=l.sub(k).mul(new(g())(1e3)).toString();return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{children:["Price started at: \u039E ",(0,i._9)(c)]}),(0,f.jsxs)("div",{children:["Price goes to: \u039E ",(0,i._9)(d)]}),(0,f.jsxs)("div",{children:["Duration:\xa0",h().duration(parseInt(m,10)).asDays()," days"]})]})}},48043:function(p,b,a){"use strict";a.d(b,{e:function(){return am}});var q=a(85893),r=a(96627),s=a(66006),t=a(75079),u=a(96504),v=a(89360),c=a(94184),w=a.n(c),x=a(93834),y=a(63169),z=a(67294),A=a(12204),d=a(34051),B=a.n(d),e=a(13550),C=a.n(e),D=a(50014),E=a(76614),f=a(76692),F=a.n(f),g=a(14293),G=a.n(g),H=a(48701),I=a(47890),J=a(88236),K=a(54539),L=a(88466);function M(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function N(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){M(g,e,f,d,h,"next",a)}function h(a){M(g,e,f,d,h,"throw",a)}d(void 0)})}}var O=function(c){var t,u,v,w,A,M=c.data,O=c.itemData,P=c.itemType,af=c.onConfirm,ag=c.checkUnlockedRoninWallet,ah=c.onClose,Q=c.isOpen,e=M.suggestedPrice,j={tokens:(0,z.useMemo)(function(){return K.Tm?Object.values(K.Tm):[]},[K.Tm]),baseTokenOutput:null===K.Tm||void 0===K.Tm?void 0:K.Tm.WETH,tokensByChain:K.Tm},R=j.tokens,a=j.baseTokenOutput,g=(0,D.J)().exchangeRate,ai=(0,E.jS)(),k=(0,E.ec)().profile,aj=null==k?void 0:k.addresses.ronin,l=(0,z.useState)(!1),m=l[0],ak=l[1],n=(0,z.useState)(!0),S=n[0],al=n[1],o=(0,z.useState)(e?I.fromWei(e,a.unit):""),f=o[0],am=o[1],p=(0,z.useState)(e),T=p[0],an=p[1],q=(0,z.useState)(F()(a,null)),b=q[0],ao=q[1],ap=(0,z.useRef)(!1),r=(0,z.useState)(x.e.Idle),h=r[0],aq=r[1],s=(0,z.useState)(x.e.Idle),U=s[0],ar=s[1],i=(0,z.useMemo)(function(){return(null==b?void 0:b.address)===a.address},[b,a]),d=(0,z.useMemo)(function(){return h===x.e.Error||h===x.e.Requesting},[h]),V=(0,z.useMemo)(function(){return(0,L.Uy)(Number(I.fromWei(new(C())(e),a.unit)),a,g)},[e,a,g]),W=(0,z.useMemo)(function(){return i?V:b&&g&&!d?(0,L.Uy)(Number(f),b,g):void 0},[f,b,g,i,V,d,]),X=(0,z.useMemo)(function(){return d?"--":"".concat((0,H.xG)(f,4)," ").concat(null==b?void 0:b.symbol)},[f,b,d]),Y=(0,z.useMemo)(function(){var b=I.fromWei(e,a.unit);return(0,H.xG)(b,4)},[e,a]),Z=(0,z.useMemo)(function(){if(!d){if([!b,!f,i,"error"===h,"requesting"===h,!g,].filter(Boolean).length>0)return 0;var a=(0,L.Uy)(Number(f),b,g);return(0,L.Ld)(V,a)}},[f,b,g,i,h,d,]),$=(0,z.useMemo)(function(){if(!b||!a||d)return"--";var c=Number(f)*J.g6+Number(f);return"".concat((0,H.xG)(c,5)," ").concat(b.symbol)},[f,b,a,d]),_=(0,z.useMemo)(function(){var a=(0,L.GS)(b?[b]:[]),c=Number(f)*Number(a.toSignificant(6))/100,e=d||G()(Z)?void 0:Z-Number(a.toSignificant(6)),g=d?"--":"~".concat((0,H.xG)(c,6)," ").concat(null==b?void 0:b.symbol);return{realizedLpFeePercent:a,realizedLPFee:(0,H.xG)(c,4),priceImpact:e,maximumSent:$,tradePriceImpact:Z,liquidityProviderFee:g,slippage:100*J.g6}},[b,f,Z,$,d,]),aa=(0,z.useMemo)(function(){if(!b||!g)return 0;var c=(0,L.Uy)(1,b,g),d=(0,L.Uy)(1,a,g);return c<0?0:d/c},[g,a,b]),ab=(0,z.useMemo)(function(){switch(P){case y.y.Axie:return"Buy ".concat(O.name);case y.y.Bundle:return"Buy ".concat(O.name);case y.y.Item:return"Buy ".concat(O.name);case y.y.Land:var a=O,d="".concat(a.landType," plot (").concat(a.col,", ").concat(a.row,")");return"Buy ".concat(d);case y.y.Rune:var b=O;return b?"Buy ".concat(b.name):"Buy Rune";case y.y.Charm:var c=O;return c?"Buy ".concat(c.name):"Buy Charm";default:return"Buy now"}},[O,P]),ac=(t=N(B().mark(function b(d){var f,g,h,i,j,k;return B().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(f=ai().scopedRoninWeb3,g=ag()){b.next=5;break}return ah&&ah(),b.abrupt("return");case 5:if(!(!aj||!f)){b.next=8;break}return aq(x.e.Idle),b.abrupt("return");case 8:if(ao(d),d.address!==(null==a?void 0:a.address)){b.next=15;break}return aq(x.e.Idle),al(!0),am(I.fromWei(e,d.unit)),c.onSelectToken(d,e),b.abrupt("return");case 15:return aq(x.e.Requesting),b.prev=16,b.next=19,f.katanaContract.getAmountsIn(new(C())(e),[d.address,null==a?void 0:a.address,]).call();case 19:return i=(h=b.sent)[0],am(j=I.fromWei(i,d.unit)),b.next=25,d.isAllowanceEnough(aj,new(C())(i));case 25:al(k=b.sent),an(i),aq(x.e.Success),c.onSelectToken(d,i),b.next=36;break;case 32:b.prev=32,b.t0=b.catch(16),am(""),aq(x.e.Error);case 36:case"end":return b.stop()}},b,null,[[16,32]])})),function(a){return t.apply(this,arguments)}),as=(u=N(B().mark(function b(){var c;return B().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(aj){b.next=2;break}return b.abrupt("return");case 2:return ar(x.e.Requesting),b.next=5,a.approve(aj);case 5:(c=b.sent).success?(ar(x.e.Success),ak(!0)):ar(x.e.Error);case 7:case"end":return b.stop()}},b)})),function(){return u.apply(this,arguments)}),ad=(v=N(B().mark(function a(){var c,d;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=ag()){a.next=4;break}return ah&&ah(),a.abrupt("return");case 4:if(m){a.next=8;break}return a.next=7,as();case 7:return a.abrupt("return");case 8:if(!(!b||!aj||S)){a.next=10;break}return a.abrupt("return");case 10:return ar(x.e.Requesting),a.next=13,b.approve(aj);case 13:(d=a.sent).success?(ar(x.e.Success),al(!0)):ar(x.e.Error);case 15:case"end":return a.stop()}},a)})),function(){return v.apply(this,arguments)}),ae=(w=N(B().mark(function c(){var d;return B().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(d=ag()){c.next=4;break}return ah&&ah(),c.abrupt("return");case 4:if(!(!b||!aj)){c.next=6;break}return c.abrupt("return");case 6:af({isSelectedWETH:i,amount:i?e:T,selectedToken:b,baseToken:a});case 7:case"end":return c.stop()}},c)})),function(){return w.apply(this,arguments)}),at=(A=N(B().mark(function b(){var c;return B().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!ap.current){b.next=2;break}return b.abrupt("return");case 2:return b.next=4,a.isAllowanceEnough(aj,new(C())(e));case 4:ak(c=b.sent),ap.current=!0;case 7:case"end":return b.stop()}},b)})),function(){return A.apply(this,arguments)});return(0,z.useEffect)(function(){at()},[Q]),{tokens:R,baseTokenOutput:a,isSelectedBaseToken:i,totalTokenOutput:X,selectedToken:b,advancedSwapDetails:_,totalUSDAmount:W,tradeExchangeRate:aa,swapedTokenAmount:T,isAllowanceEnough:m&&S,getAmountSwapStatus:h,titleDialog:ab,approveRequestStatus:U,isIncorrectPrice:d,totalBaseTokenAmount:Y,baseTokenIsAllowanceEnough:m,onSelectToken:ac,onClickConfirm:ae,onClickApprove:ad}},P=a(61876),Q=a(89084),R=a(83838),h=a(46395),S=a.n(h),T=a(50754),U=a(77911),V=a(69382),W=a(78796),i=a(28588),X=a.n(i),Y=function(a){var b=a.label,c=a.value,d=a.className;return(0,q.jsxs)("div",{className:w()(X().Container,d),children:[(0,q.jsx)(s.Z.Text,{level:"4",bold:!0,tag:"div",className:X().Label,children:b}),(0,q.jsx)(s.Z.Text,{level:"3",bold:!0,tag:"div",className:X().Value,children:c})]})},j=a(29127),Z=a.n(j),$=a(22169),_=a(20782),k=a(29324),aa=a.n(k),ab=function(a){var e=a.className,b=a.selectedTokenSymbol,c=a.basedTokenSymbol,d=(0,z.useState)(!1),f=d[0],g=d[1];return(0,q.jsx)("div",{className:w()(e,aa().Container),children:(0,q.jsx)($.J2,{isOnDialog:!0,layerClassName:aa().Popover,placement:"bottom-start",onOutsideClick:function(){return g(!1)},isOpen:f,triggerElement:(0,q.jsxs)(s.Z.Text,{className:aa().Trigger,level:"4",bold:!0,onClick:function(){return g(!0)},children:["Liquidity provider fee",(0,q.jsx)(_.m,{})]}),children:(0,q.jsxs)("div",{className:aa().Content,children:["Marketplace will automatically swap"," ",null==b?void 0:b.toUpperCase()," for"," ",null==c?void 0:c.toUpperCase(),", and this requires a small liquidity provider fee."]})})})},ac=function(b){var a=b.priceImpact,c=(0,L.oX)(a),d=(0,z.useMemo)(function(){return c>=2?"#f82837":"#f6a300"},[c]);return G()(a)?(0,q.jsx)("div",{className:"text-14 leading-20",children:"--"}):(0,q.jsxs)("div",{className:"text-14 leading-20",style:{color:d},children:["~","0.00"===(-1*a).toFixed(2)?"<0.01":(-1*a).toFixed(2),"%"]})},ad=function(a){var b=a.liquidityProviderFee,c=a.route,d=a.priceImpact,e=a.maxSent,f=a.slippage,g=a.selectedTokenSymbol,h=a.basedTokenSymbol;return(0,q.jsxs)("div",{className:Z().Container,children:[(0,q.jsx)(Y,{className:Z().Item,label:(0,q.jsx)(ab,{selectedTokenSymbol:g,basedTokenSymbol:h}),value:b}),(0,q.jsx)(Y,{className:Z().Item,label:"Route",value:c}),(0,q.jsx)(Y,{className:Z().Item,label:"Price impact",value:(0,q.jsx)(ac,{priceImpact:d})}),(0,q.jsx)(Y,{className:Z().Item,label:"Maximum sent",value:e}),(0,q.jsx)(Y,{className:Z().Item,label:"Slippage tolerence",value:f})]})},l=a(7280),ae=a.n(l),af=function(a){var d=a.className,e=a.total,c=a.totalUSD,b=a.tradePriceImpact,f=a.tradeExchangeRate,g=a.inputTokenSymbol,h=a.outputTokenSymbol,i=a.isSelectedBaseToken,j=(0,z.useMemo)(function(){if(b){if(b<0)return"#27AE60";var a=(0,L.oX)(b);return a<1?"#C3C5CB":a<3?"#e3a507":"#FD4040"}},[b]),k=(0,z.useMemo)(function(){return[g===h,G()(g),G()(h),G()(f),0===f,].filter(Boolean).length>0?"":"1 ".concat(g," =  ").concat((0,H.xG)(f,2)," ").concat(h)},[g,h,f]),l=(0,z.useMemo)(function(){return!(G()(b)||isNaN(b))&&!i},[b,i]);return(0,q.jsxs)("div",{className:w()(ae().Container,d),children:[(0,q.jsx)(s.Z.Heading,{level:"4",className:ae().TotalValue,children:e}),(0,q.jsxs)("div",{className:ae().ConvertedFeeRow,children:[(0,q.jsx)(s.Z.Text,{level:"2",tag:"span",className:ae().TotalFiatValue,children:G()(c)?"--":"~$".concat((0,H.xG)(c,4))}),l&&(0,q.jsxs)(s.Z.Text,{level:"2",tag:"span",className:ae().FeePercent,style:{color:j},children:["~",(-1*b).toFixed(3),"%"]})]}),(0,q.jsx)(s.Z.Text,{level:"3",tag:"div",className:ae().ExchangeRate,children:k})]})},m=a(8367),ag=a.n(m),ah=function(a){var f=a.totalBaseTokenAmount,g=a.className,b=a.selectedToken,c=a.baseToken,h=a.totalUSD,d=a.isSelectedBaseToken,i=a.totalTokenOutput,j=a.tradeExchangeRate,k=a.tradePriceImpact,l=a.liquidityProviderFee,m=a.priceImpact,n=a.maxSent,o=a.slippage,e=(0,W.O)(),p=e.isToggled,u=e.onToggle,r=(0,z.useRef)(null),t=(0,z.useMemo)(function(){return d?"PAY AS":"PAY ".concat(f," ").concat(c.symbol.toUpperCase()," AS")},[d,c,f]);return(0,q.jsxs)("div",{className:w()(ag().Container,g),children:[(0,q.jsxs)("div",{className:ag().TotalSection,children:[(0,q.jsxs)("div",{className:ag().TotalSectionInfo,children:[(0,q.jsx)(s.Z.Text,{level:"4",bold:!0,className:ag().PayAsTitle,children:t}),(0,q.jsx)("div",{className:ag().PriceInfo,children:(0,q.jsx)(af,{totalUSD:h,isSelectedBaseToken:d,total:i,tradeExchangeRate:j,tradePriceImpact:k,inputTokenSymbol:null==c?void 0:c.symbol,outputTokenSymbol:null==b?void 0:b.symbol})})]}),!d&&(0,q.jsxs)(s.Z.Text,{level:"4",bold:!0,className:ag().FeesTrigger,tag:"div",onClick:function(){if(!r.current){u();return}V.ZP.killTweensOf(r.current),V.ZP.to(r.current,{height:p?"0":"auto",autoAlpha:p?"0":1,duration:.25,onComplete:function(){return u()}})},children:[p?(0,q.jsx)(T.d,{}):(0,q.jsx)(U.P,{}),"Detail Rate"]})]}),(0,q.jsx)("div",{ref:r,className:ag().FeesDetail,children:!d&&(0,q.jsx)(ad,{liquidityProviderFee:l,route:[null==b?void 0:b.symbol,null==c?void 0:c.symbol].join(" > "),priceImpact:m,maxSent:n,slippage:"".concat(o,"%"),selectedTokenSymbol:null==b?void 0:b.symbol,basedTokenSymbol:c.symbol})})]})},n=a(18049),ai=a.n(n),aj=function(a){var c=a.errorBuy,d=a.className,b=(0,z.useMemo)(function(){switch(c){case A.z.General:return(0,q.jsx)("div",{className:"text-warning-4 text-12 leading-16 font-bold",children:"Something wrong. Please try again in few seconds."});case A.z.GetAmountError:return(0,q.jsx)("div",{className:"text-warning-4 text-12 leading-16 font-bold",children:"The request failed. Please try again."});case A.z.InsufficientBalance:return(0,q.jsx)("div",{className:"text-warning-4 text-12 leading-16 font-bold",children:"Insufficient balance for transaction."});case A.z.HighPriceImpact:return(0,q.jsxs)("div",{className:"text-gray-1 text-12 leading-16 font-bold",children:["Marketplace does not support this transaction because the fee is too high, please go to"," ",(0,q.jsx)("a",{className:"text-primary-4",href:"https://katana.roninchain.com",target:"_blank",rel:"noreferrer",children:"Katana"})," ","to swap the token."]});default:return null}},[c]);return b?(0,q.jsx)("div",{className:w()(d,ai().Container),children:(0,q.jsx)("div",{className:ai().Content,children:(0,q.jsx)("div",{className:ai().Message,children:b})})}):null},o=a(65056),ak=a.n(o),al=function(a){var d=a.selectedToken,b=a.tokens,c=a.className,e=a.onChange;return(0,q.jsxs)("ul",{className:w()(ak().Container,c),children:[b.map(function(a){var c,b=(null==d?void 0:d.address)===a.address;return(0,q.jsx)("li",{className:ak().Token,children:(0,q.jsx)(t.zx,{fullWidth:!0,variant:b?t.Wu.Default:t.Wu.Plain,intent:b?u.S.Primary:u.S.Default,onClick:(c=a,function(){c.address!==(null==d?void 0:d.address)&&e(c)}),text:(0,q.jsx)("span",{className:ak().ButtonContent,children:(0,q.jsx)("img",{src:null==a?void 0:a.imageUrl,alt:null==a?void 0:a.name,width:"24",height:"24"})})})},a.address)}),(0,q.jsx)("div",{})]})},am=function(b){var c,f,g,o=b.errorBuy,k=b.isOpen,p=b.tokensBalance,B=b.buyRequestStatus,C=b.onClose,D=b.itemData,E=b.itemType,a=O(b),F=a.tokens,d=a.baseTokenOutput,h=a.selectedToken,G=a.totalTokenOutput,e=a.advancedSwapDetails,H=a.isSelectedBaseToken,I=a.totalUSDAmount,J=a.tradeExchangeRate,i=a.isAllowanceEnough,j=a.getAmountSwapStatus,K=a.titleDialog,L=a.approveRequestStatus,M=a.isIncorrectPrice,l=a.totalBaseTokenAmount,N=a.baseTokenIsAllowanceEnough,T=a.onClickApprove,U=a.onSelectToken,V=a.onClickConfirm,m=(0,z.useMemo)(function(){return i?null:N?h:d},[i,N,h,d,]),W=(0,z.useMemo)(function(){return j===x.e.Error?A.z.GetAmountError:o},[j,o]),X=(0,P.i)().screenSize,n=E===y.y.Axie,Y=X===P._.Mobile?null:(0,q.jsx)(R.Z,{show:n,isDialogOpen:k,axie:D});return(0,q.jsx)(r.V,{visible:k,onClose:C,size:"large",rootClassName:S().BuyDialogRoot,className:w()(S().BuyDialog,(c={},f=S().AxieDialog,g=n,f in c?Object.defineProperty(c,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[f]=g,c)),children:(0,q.jsxs)("div",{className:S().Content,children:[(0,q.jsxs)("div",{className:S().Header,children:[(0,q.jsx)(v.e,{size:20}),(0,q.jsx)("div",{className:S().Title,children:K})]}),(0,q.jsxs)("div",{className:S().Body,children:[Y,(0,q.jsxs)("div",{className:S().Detail,children:[d&&(0,q.jsxs)("div",{className:S().BaseToken,children:[(0,q.jsx)(s.Z.Heading,{level:"5",className:S().Label,children:"Price"}),(0,q.jsxs)("div",{className:S().BaseTokenPrice,children:[(0,q.jsx)("img",{src:d.imageUrl,alt:d.name,width:"20",height:"20"}),(0,q.jsx)(s.Z.Heading,{tag:"span",level:"5",children:l})]})]}),(0,q.jsx)("div",{className:S().SelectTokenSection,children:(0,q.jsx)(al,{selectedToken:h,tokens:F,tokensBalance:p,onChange:U})}),(0,q.jsx)(ah,{totalBaseTokenAmount:l,totalTokenOutput:G,tradeExchangeRate:J,tradePriceImpact:e.tradePriceImpact,isSelectedBaseToken:H,totalUSD:I,liquidityProviderFee:e.liquidityProviderFee,priceImpact:e.priceImpact,maxSent:e.maximumSent,slippage:"".concat(e.slippage,"%"),selectedToken:h,baseToken:d}),(0,q.jsx)(aj,{errorBuy:W}),i&&(0,q.jsx)(t.zx,{fullWidth:!0,intent:u.S.Primary,onClick:V,loading:j===x.e.Requesting||B===x.e.Requesting,disabled:M,text:"Buy Now"}),!i&&(0,q.jsx)(Q.z,{onClickApprove:T,symbol:null==m?void 0:m.symbol.toUpperCase(),loading:L===x.e.Requesting||j===x.e.Requesting})]})]})]})})}},89084:function(e,b,a){"use strict";a.d(b,{z:function(){return m}});var f=a(85893),g=a(22169),h=a(75079),i=a(96504),c=a(94184),j=a.n(c),k=a(67294),d=a(76355),l=a.n(d),m=function(a){var d=a.className,e=a.contentClassName,m=a.loading,b=a.symbol,n=a.onClickApprove,c=(0,k.useState)(!1),o=c[0],p=c[1];return(0,f.jsxs)("div",{className:j()(d,l().Container),children:[(0,f.jsx)("div",{className:l().Desc,children:(0,f.jsx)(g.J2,{layerStyle:{zIndex:1e4},isOpen:o,onOutsideClick:function(){return p(!1)},placement:"top-start",triggerElement:(0,f.jsxs)("div",{className:l().Trigger,onClick:function(){return p(!0)},children:["Allow Marketplace to use your ",b]}),children:(0,f.jsxs)("div",{className:j()(l().Content,e),children:["You must give the Marketplace smart contract permission to use your"," ",b,". You only have to do this once per token."]})})}),(0,f.jsx)(h.zx,{loading:m,intent:i.S.Primary,onClick:n,text:"Approve ".concat(b)})]})}},83838:function(e,b,a){"use strict";var f=a(85893),c=a(94184),g=a.n(c);a(67294);var h=a(76273),d=a(8549),i=a.n(d);b.Z=function(a){var b=a.show,c=a.axie,d=a.isDialogOpen,e=a.className;if(!b)return null;var j=d?(0,f.jsx)(h.Z,{axie:c,style:{width:200,height:250,transform:"scaleX(-1)"},hideFloor:!0,scale:.13,position:{x:100,y:170}}):null;return(0,f.jsx)("div",{className:g()(i().Container,e),children:j})}},85433:function(d,b,a){"use strict";a.d(b,{I:function(){return i}});var e=a(85893),c=a(52353),f=a.n(c),g=a(67294),h=a(74664),i=function(b){var c=(0,g.useState)(!1),i=c[0],j=c[1],d=(0,g.useState)(),a=d[0],k=d[1];return{openTransactionSubmission:function(a){j(!0),k(a)},dialog:(0,e.jsx)(e.Fragment,{children:!f()(a)&&(0,e.jsx)(h.g,{open:i,onClose:function(){j(!1)},txHash:a.txHash,primaryAction:null==b?void 0:b.primaryAction,children:a.message})})}}},74664:function(d,b,a){"use strict";a.d(b,{g:function(){return j}});var e=a(85893),f=a(96627),g=a(75079),h=a(96504),c=a(41664),i=a.n(c);a(67294);var j=function(a){var b=a.children,c=a.onClose,d=a.open;return(0,e.jsxs)(f.V,{visible:d,maskClosable:!1,onClose:c,size:"medium",title:"Transaction Submitted",children:[b,(0,e.jsxs)("div",{className:"mt-24 w-full flex flex-col-reverse sm:flex-row",children:[(0,e.jsx)("div",{className:"flex-1 mr-0 sm:mr-8",children:(0,e.jsx)(g.zx,{onClick:a.onClose,fullWidth:!0,text:"Close"})}),a.primaryAction||(0,e.jsx)(i(),{as:"/profile/activity",href:"/profile/activity",children:(0,e.jsx)("a",{rel:"noopener noreferrer",className:"flex-1 my-8 sm:my-0",children:(0,e.jsx)(g.zx,{intent:h.S.Primary,fullWidth:!0,text:"Go to my activity"})})})]})]})}},67863:function(d,b,a){"use strict";a.d(b,{x:function(){return f}});var e=a(85893),c=a(5152);a(67294);var f=(0,c.default)(function(){return Promise.all([a.e(2580),a.e(8687),a.e(5083)]).then(a.bind(a,938)).then(function(a){return a.AxieFigure})},{loadableGenerated:{webpack:function(){return[938]}},ssr:!1,loading:function(){return(0,e.jsx)(e.Fragment,{})}})},76273:function(f,c,a){"use strict";var g=a(85893),h=a(78297),d=a(18446),i=a.n(d),e=a(67294),j=a(67863);function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var b=e.memo(function(a){var b=a.axie,d=a.style,e=a.hideFloor,f=a.scale,i=a.position;if(b.stage,2===b.stage||1===b.stage)return(0,g.jsx)("div",{className:"w-full my-auto",children:(0,g.jsx)("img",{src:b.image,width:400,height:400})});try{var c=new h.AxieMixer(b.newGenes);return(0,g.jsx)("div",{className:"w-full my-auto",children:(0,g.jsx)(j.x,{resource:{json:c.spine,images:{"axie-2d-v3-stuff.png":"https://axiecdn.axieinfinity.com/mixer-stuffs/v2/"}},variant:c.variant,style:function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}({width:380,height:480},d),hideFloor:e,figureScale:f,position:i})})}catch(l){return console.error(l),(0,g.jsx)("div",{})}},function(a,b){return i()(JSON.stringify(a.axie),JSON.stringify(b.axie))});b.displayName="AxieDetailFigure",c.Z=b},12204:function(i,d,a){"use strict";a.d(d,{z:function(){return c},O:function(){return F}});var b,c,e=a(34051),j=a.n(e),f=a(13550),k=a.n(f),l=a(93377),m=a(76614),n=a(93834),o=a(54695),p=a(63169),q=a(60114),r=a(69463),g=a(14293),s=a.n(g),h=a(30381),t=a.n(h),u=a(67294),v=a(72072),w=a(84245),x=a(88236),y=a(54539),z=a(47890);function A(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}var B={WETH:"",AXS:"",SLP:"",USDC:""},C=function(){var d,e,a=(0,m.ec)().profile,i=null==a?void 0:a.addresses.ronin,b=(0,u.useState)(n.e.Idle),f=b[0],k=b[1],c=(0,u.useState)(B),g=c[0],l=c[1],h=(e=(d=j().mark(function a(){var b;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i){a.next=3;break}return l(B),a.abrupt("return");case 3:return k(n.e.Requesting),a.prev=4,a.next=7,Promise.all([y.Tm.WETH.fetchBalance(i),y.Tm.AXS.fetchBalance(i),y.Tm.SLP.fetchBalance(i),y.Tm.USDC.fetchBalance(i),]);case 7:b=a.sent,l({WETH:z.fromWei(b[0],y.Tm.WETH.unit),AXS:z.fromWei(b[1],y.Tm.AXS.unit),SLP:z.fromWei(b[2],y.Tm.SLP.unit),USDC:z.fromWei(b[3],y.Tm.USDC.unit)}),k(n.e.Success),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),l(B),k(n.e.Error);case 16:case"end":return a.stop()}},a,null,[[4,12]])}),function(){var a=this,b=arguments;return new Promise(function(e,f){var g=d.apply(a,b);function c(a){A(g,e,f,c,h,"next",a)}function h(a){A(g,e,f,c,h,"throw",a)}c(void 0)})}),function(){return e.apply(this,arguments)});return{tokensBalance:g,fetchTokensBalanceStatus:f,fetchBalances:h}};function D(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function E(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){D(g,e,f,d,h,"next",a)}function h(a){D(g,e,f,d,h,"throw",a)}d(void 0)})}}(b=c||(c={})).None="none",b.InsufficientBalance="insufficientBalance",b.HighPriceImpact="highPriceImpact",b.GetAmountError="getAmountError",b.General="general";var F=function(a,b){var z,A,B,D,F,G,H,I,Q=b.openTransactionSubmission,J=b.referralAddress,R=a.owner,S=a.tokenId,T=a.itemType,U=a.order,V=(0,l.o)({requireConfig:q.v.gaTrackingCode}).GAService,W=(0,o.P)().logActivity,d=C(),X=d.fetchBalances,K=d.tokensBalance,e=(0,m.ec)(),f=e.activeRoninAddress,Y=void 0===f?"":f,Z=e.scopedRoninWeb3,g=(0,w.N)(),$=g.settleOrder,_=g.swapTokensAndSettleOrder,h=(0,u.useState)(!1),L=h[0],aa=h[1],i=(0,u.useState)(c.None),M=i[0],ab=i[1],y=(0,u.useState)(n.e.Idle),N=y[0],ac=y[1],ad=(0,u.useMemo)(function(){return s()(J)?x.r_:J},[J]),O=function(){if(!s()(Z))return{scopedRoninWeb3:Z};throw new Error("Ronin web3 is not found.")},ae=(z=E(j().mark(function a(b,c){var d,e,f;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=O().scopedRoninWeb3,!(!Y||!d)){a.next=3;break}return a.abrupt("return",!0);case 3:return e=new(k())(c),a.next=6,b.fetchBalance(Y);case 6:return f=a.sent,a.abrupt("return",e.gt(f));case 8:case"end":return a.stop()}},a)})),function(a,b){return z.apply(this,arguments)}),af=function(){return t()().add(30,"minutes").unix()},ag=(A=E(j().mark(function b(c){var d,e,f,g,h,i,k,l,m;return j().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=c.baseToken,e=c.selectedToken,f=c.isSelectedWETH,g=c.amount,i=(h=a.itemData).row,k=h.col,l=h.owner,!f){b.next=9;break}return b.next=6,$(U,g,ad);case 6:m=b.sent,b.next=12;break;case 9:return b.next=11,_(U,g,[e.address,d.address],ad,af());case 11:m=b.sent;case 12:return b.next=14,W(r.aU.BuyLand,{col:k,row:i,price:U.suggestedPrice,owner:l,txHash:m.hash});case 14:return b.abrupt("return",m.hash);case 15:case"end":return b.stop()}},b)})),function(a){return A.apply(this,arguments)}),ah=(B=E(j().mark(function b(c){var d,e,f,g,h,i,k,l,m;return j().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=c.baseToken,e=c.selectedToken,f=c.isSelectedWETH,g=c.amount,i=(h=a.itemData).itemAlias,k=h.itemId,l=h.owner,!f){b.next=9;break}return b.next=6,$(U,g,ad);case 6:m=b.sent,b.next=12;break;case 9:return b.next=11,_(U,g,[e.address,d.address],ad,af());case 11:m=b.sent;case 12:return b.next=14,W(r.aU.BuyItem,{tokenId:k,itemAlias:i,price:U.suggestedPrice,owner:l,txHash:m.hash});case 14:return b.abrupt("return",m.hash);case 15:case"end":return b.stop()}},b)})),function(a){return B.apply(this,arguments)}),ai=(D=E(j().mark(function a(b){var c,d,e,f,g;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.baseToken,d=b.selectedToken,e=b.isSelectedWETH,f=b.amount,!e){a.next=8;break}return a.next=5,$(U,f,ad);case 5:g=a.sent,a.next=11;break;case 8:return a.next=10,_(U,f,[d.address,c.address],ad,af());case 10:g=a.sent;case 11:return a.next=13,W(r.aU.BuyBundle,{listingIndex:U.id,txHash:g.hash,price:U.suggestedPrice,owner:U.maker});case 13:return a.abrupt("return",g.hash);case 14:case"end":return a.stop()}},a)})),function(a){return D.apply(this,arguments)}),aj=(F=E(j().mark(function a(b){var c,d,e,f,g;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.baseToken,d=b.selectedToken,e=b.isSelectedWETH,f=b.amount,U){a.next=3;break}return a.abrupt("return",Promise.reject("Order info not found."));case 3:if(!e){a.next=10;break}return a.next=7,$(U,f,ad);case 7:g=a.sent,a.next=13;break;case 10:return a.next=12,_(U,f,[d.address,c.address],ad,af());case 12:g=a.sent;case 13:return a.next=15,W(r.aU.BuyAxie,{owner:R,axieId:S,price:U.suggestedPrice,txHash:g.hash});case 15:return a.abrupt("return",g.hash);case 16:case"end":return a.stop()}},a)})),function(a){return F.apply(this,arguments)}),ak=(G=E(j().mark(function a(b){var c,d,e,f,g;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.baseToken,d=b.selectedToken,e=b.isSelectedWETH,f=b.amount,U){a.next=3;break}return a.abrupt("return",Promise.reject("Order info not found."));case 3:if(!e){a.next=10;break}return a.next=7,$(U,f,ad);case 7:g=a.sent,a.next=13;break;case 10:return a.next=12,_(U,f,[d.address,c.address],ad,af());case 12:g=a.sent;case 13:return a.abrupt("return",g.hash);case 14:case"end":return a.stop()}},a)})),function(a){return G.apply(this,arguments)}),al=function(c){var a,b,d=c.selectedToken.symbol.toUpperCase();switch(d){case"AXS":b=v.V3.PAY_IN_AXS,a=v.Ok.PAY_IN_AXS;break;case"SLP":b=v.V3.PAY_IN_SLP,a=v.Ok.PAY_IN_SLP;break;case"WETH":b=v.V3.PAY_IN_WETH,a=v.Ok.PAY_IN_WETH;break;case"USDC":b=v.V3.PAY_IN_USDC,a=v.Ok.PAY_IN_USDC;break;default:break}b&&a&&V.sendEvent({category:v.H7.PAY_ASSETS,label:a,action:b})},am=(H=E(j().mark(function a(b){var d;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:ac(n.e.Requesting),a.prev=1,d="",a.t0=T,a.next=a.t0===p.y.Axie?6:a.t0===p.y.Land?10:a.t0===p.y.Item?14:a.t0===p.y.Bundle?18:a.t0===p.y.Rune?22:a.t0===p.y.Charm?22:26;break;case 6:return a.next=8,aj(b);case 8:return d=a.sent,a.abrupt("break",26);case 10:return a.next=12,ag(b);case 12:return d=a.sent,a.abrupt("break",26);case 14:return a.next=16,ah(b);case 16:return d=a.sent,a.abrupt("break",26);case 18:return a.next=20,ai(b);case 20:return d=a.sent,a.abrupt("break",26);case 22:return a.next=24,ak(b);case 24:return d=a.sent,a.abrupt("break",26);case 26:return aa(!1),al(b),Q({txHash:d,message:"Transaction submitted successfully."}),ac(n.e.Success),a.abrupt("return",{error:!1,isShowDeposit:!1});case 33:return a.prev=33,a.t1=a.catch(1),console.error("[ErrorSettleOrder]",a.t1),ab(c.General),ac(n.e.Error),a.abrupt("return",{error:!0,isShowDeposit:!1,errorMessage:"Something wrong. Please try again in few seconds."});case 39:case"end":return a.stop()}},a,null,[[1,33]])})),function(a){return H.apply(this,arguments)}),P=(I=E(j().mark(function a(b){var d,e,f;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=b.selectedToken,e=b.amount,ab(c.None),!(!d||!Y)){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,ae(d,e);case 6:if(!(f=a.sent)){a.next=10;break}return ab(c.InsufficientBalance),a.abrupt("return");case 10:am(b);case 11:case"end":return a.stop()}},a)})),function(a){return I.apply(this,arguments)});return{errorBuy:M,isShowBuyNowDialog:L,tokensBalance:K,buyRequestStatus:N,requireOrderId:function(){if(!s()(null==U?void 0:U.id))return U.id;throw new Error("Order id is missing.")},requireActiveRoninAddress:function(){if(!s()(Y))return Y;throw new Error("Ronin web3 address is not found.")},requireRoninWeb3:O,onClickBuyNow:function(a){a.preventDefault(),X(),aa(!0)},onConfirmBuyNow:P,onCloseBuyNowDialog:function(){aa(!1)},onChangeSelectToken:function(){ab(c.None)}}}},69574:function(d,c,b){"use strict";b.d(c,{Qm:function(){return f},hG:function(){return h},mr:function(){return g},w3:function(){return e}});var a=b(60114),e={Asset:[{name:"erc",type:"uint8"},{name:"addr",type:"address"},{name:"id",type:"uint256"},{name:"quantity",type:"uint256"},],Order:[{name:"maker",type:"address"},{name:"kind",type:"uint8"},{name:"assets",type:"Asset[]"},{name:"expiredAt",type:"uint256"},{name:"paymentToken",type:"address"},{name:"startedAt",type:"uint256"},{name:"basePrice",type:"uint256"},{name:"endedAt",type:"uint256"},{name:"endedPrice",type:"uint256"},{name:"expectedState",type:"uint256"},{name:"nonce",type:"uint256"},{name:"marketFeePercentage",type:"uint256"},]},f={name:a.v.marketGateway.domainName,version:a.v.marketGateway.domainVersion,chainId:a.v.marketGateway.domainChainId,verifyingContract:a.v.marketGateway.domainVerifyingContract},g=0,h=425},94294:function(g,e,f){"use strict";var c,d,a,b;f.d(e,{d:function(){return d},q:function(){return c}}),(a=c||(c={}))[a.Erc20=0]="Erc20",a[a.Erc721=1]="Erc721",a[a.Erc1155=2]="Erc1155",(b=d||(d={}))[b.Offer=0]="Offer",b[b.Sell=1]="Sell"},84245:function(h,b,a){"use strict";a.d(b,{N:function(){return v}});var c=a(34051),i=a.n(c),j=a(18499),k=a(76614),l=a(60715),m=a(67294),n=function(){var a=(0,k.ec)().scopedRoninWeb3;return{ethersProvider:(0,m.useMemo)(function(){var b,c=null==a?void 0:null===(b=a.roninWeb3Wrapper)||void 0===b?void 0:b.getProvider();return c?new l.Q(c):null},[a])}},d=a(75360),e=a(12537);function f(){var a,b,c=(a=["\n  mutation CreateOrder($order: InputOrder!, $signature: String!) {\n    createOrder(order: $order, signature: $signature) {\n      ...OrderInfo\n    }\n  }\n  ","\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return f=function(){return c},c}var o=(0,d.ZP)(f(),e.Nx),g=a(14293),p=a.n(g),q=a(69574),r=a(76208);function s(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function t(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function u(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){t(g,e,f,d,h,"next",a)}function h(a){t(g,e,f,d,h,"throw",a)}d(void 0)})}}var v=function(){var a,b,e,f,g,h,c=(0,k.ec)(),d=c.profile,l=c.scopedRoninWeb3,x=null==d?void 0:d.addresses.ronin,y=n().ethersProvider,z=(a=(0,j.Db)(o),b=1,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||function(a,c){if(a){if("string"==typeof a)return s(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return s(a,c)}}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],t=(0,m.useMemo)(function(){return l?l.marketGatewayContract:null},[l]),v=(e=u(i().mark(function a(b){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(y){a.next=2;break}return a.abrupt("return",null);case 2:return a.prev=2,a.next=5,y.getSigner()._signTypedData(q.Qm,q.w3,b);case 5:return a.abrupt("return",a.sent);case 8:return a.prev=8,a.t0=a.catch(2),a.abrupt("return",null);case 11:case"end":return a.stop()}},a,null,[[2,8]])})),function(a){return e.apply(this,arguments)}),w=(f=u(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!t||!x||!y)){a.next=2;break}return a.abrupt("return",null);case 2:return a.prev=2,a.abrupt("return",t.getNonce(x));case 6:return a.prev=6,a.t0=a.catch(2),a.abrupt("return",null);case 9:case"end":return a.stop()}},a,null,[[2,6]])})),function(){return f.apply(this,arguments)});return{marketGatewayContract:t,getOrderSignature:v,getMakerNonce:w,checkOrderValid:(g=u(i().mark(function a(b){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",Promise.resolve(!0));case 2:return c=(0,r.Ws)(b),a.abrupt("return",t.checkOrderValid({hash:(0,r.Ob)(b.hash),order:c}));case 4:case"end":return a.stop()}},a)})),function(a){return g.apply(this,arguments)}),cancelOrder:function(a){if(!t||!x)return Promise.reject("Address or contract not found.");var b=(0,r.Ws)(a);return t.cancelOrder(b)},settleOrder:function(a,c,d){if(!t||!x)return Promise.reject("Address or contract not found.");var b=(0,r.Ws)(a);return t.settleOrder({expectedState:b.expectedState,settlePrice:c,referralAddr:d,signature:a.signature,order:b})},swapTokensAndSettleOrder:function(a,c,d,e,f){if(!t||!x)return Promise.reject("Address or contract not found.");var b=(0,r.Ws)(a);return t.swapTokensAndSettleOrder({expectedState:b.expectedState,settlePrice:c,referralAddr:e,deadline:f,path:d,signature:a.signature,order:b})},createOrder:(h=u(i().mark(function a(b,c){var d,e,f;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!t||!x)){a.next=2;break}return a.abrupt("return",Promise.reject("Address or contract not found."));case 2:return a.next=4,w();case 4:if(d=a.sent,!p()(d)){a.next=7;break}return a.abrupt("return",Promise.reject("Invalid nonce"));case 7:return b.nonce=d,e=(0,r.$P)(b,x,c),a.next=11,v(e);case 11:if(f=a.sent){a.next=14;break}return a.abrupt("return",Promise.reject("Invalid signature"));case 14:return a.abrupt("return",z({variables:{order:b,signature:f}}));case 15:case"end":return a.stop()}},a)})),function(a,b){return h.apply(this,arguments)})}}},76208:function(d,b,a){"use strict";a.d(b,{"$P":function(){return l},Ob:function(){return m},Ws:function(){return k},n9:function(){return o}});var c=a(13550),e=a.n(c),f=a(69463),g=a(69574),h=a(94294),i=function(a){switch(a.kind){case f.mr.Offer:return h.d.Offer;default:return h.d.Sell}},j=function(a){switch(a.erc){case f.tq.Erc20:return h.q.Erc20;case f.tq.Erc1155:return h.q.Erc1155;case f.tq.Erc721:return h.q.Erc721}},k=function(a){return{maker:a.maker,kind:i(a),assets:a.assets.map(function(a){return{addr:a.address,erc:j(a),quantity:Number(a.quantity),id:a.id}}),expiredAt:a.expiredAt,basePrice:a.basePrice,paymentToken:a.paymentToken,startedAt:a.startedAt,endedPrice:a.endedPrice,endedAt:a.endedAt,expectedState:Number(a.expectedState),nonce:a.nonce,marketFeePercentage:a.marketFeePercentage}},l=function(a,b,c){return{maker:b,kind:h.d.Sell,assets:a.assets.map(function(a){return{erc:j(a),addr:a.address,id:a.id,quantity:a.quantity}}),expiredAt:a.expiredAt,paymentToken:c,startedAt:a.startedAt,basePrice:a.basePrice,endedAt:a.endedAt,endedPrice:a.endedPrice,expectedState:g.mr,nonce:a.nonce,marketFeePercentage:g.hG}},m=function(a){return a.includes("0x")?a:"0x".concat(a)},n=function(a,b){var c=new(e())(a),d=new(e())(b);return c.cmp(d)},o=function(a){return a.sort(function(b,a){if(b.erc!=a.erc)return a.erc.toLowerCase().localeCompare(a.erc.toLowerCase(),"en");if(b.erc===f.tq.Erc20)return b.address.toLowerCase().localeCompare(a.address.toLowerCase(),"en");var c=b.address.toLowerCase().localeCompare(a.address.toLowerCase(),"en");return 0===c?n(b.id,a.id):c})}},88236:function(h,d,c){"use strict";c.d(d,{Bz:function(){return j},Uf:function(){return l},Zw:function(){return n},g6:function(){return o},lN:function(){return m},p9:function(){return k},r_:function(){return i},yC:function(){return f}});var b=c(64614),e=c(39499),a=c.n(e),i="0x0000000000000000000000000000000000000000";a().BigInt(604800),a().BigInt(0),new b.gG(a().BigInt(1),a().BigInt(1e4)),a().BigInt(1e4);var j=1,k=3,l=5,m=15;new b.gG(a().BigInt(50),a().BigInt(1e4)),new b.gG("0");var f=new b.gG("1");a().BigInt(0),a().BigInt(1),a().BigInt(5),a().BigInt(997),a().BigInt(1e3),a().BigInt(1e3);var g=new b.gG(a().BigInt(30),a().BigInt(1e4)),n=f.subtract(g),o=.005},88466:function(e,c,a){"use strict";a.d(c,{GS:function(){return j},Ld:function(){return i},Uy:function(){return k},oX:function(){return l}});var f=a(64614),d=a(14293),g=a.n(d),b=a(88236),h=[b.lN,b.Uf,b.p9,b.Bz,];function i(a,b){return(1-a/b)*100}function j(c){var a=b.yC.subtract(c.reduce(function(a){return a.multiply(b.Zw)},b.yC));return new f.gG(a.numerator,a.denominator)}var k=function(c,d,a){if(!a||!c)return 0;var b=a.eth.usd;switch(d.symbol.toUpperCase()){case"RON":b=a.ron.usd;break;case"AXS":b=a.axs.usd;break;case"SLP":b=a.slp.usd;break;case"USDC":b=a.usd.usd;break}return c*b},l=function(c){if(g()(c))return 4;var d=h.length,a=!0,e=!1,f=void 0;try{for(var i,b=h[Symbol.iterator]();!(a=(i=b.next()).done);a=!0){if(i.value<c)return d;d--}}catch(j){e=!0,f=j}finally{try{a||null==b.return||b.return()}finally{if(e)throw f}}return 0}},78155:function(a){a.exports={AuctionInfoContainer:"AuctionInfo_AuctionInfoContainer__fFBXh",CurrentPrice:"AuctionInfo_CurrentPrice__chkwY",CurrentPriceUsd:"AuctionInfo_CurrentPriceUsd__kJf3y",WarningMessage:"AuctionInfo_WarningMessage__M9REP",BuyNowButton:"AuctionInfo_BuyNowButton__XKNjD",CancelButton:"AuctionInfo_CancelButton__tpkmV",Dot:"AuctionInfo_Dot__sSyeh",Detail:"AuctionInfo_Detail__XNLPM",Hide:"AuctionInfo_Hide___VZjU",Icon:"AuctionInfo_Icon__4LKGN"}},21797:function(a){a.exports={Container:"PriceSlider_Container__PxPPI",Duration:"PriceSlider_Duration__PC1Qh",Slider:"PriceSlider_Slider__56l61",StartPrice:"PriceSlider_StartPrice__zjqzG",LineContainer:"PriceSlider_LineContainer__zu5aM",Line:"PriceSlider_Line__Hzy5_",Status:"PriceSlider_Status__pQ4Xl",EndPrice:"PriceSlider_EndPrice__onFH_",Dot:"PriceSlider_Dot__Ef9qO",Active:"PriceSlider_Active__2RhvD"}},46395:function(a){a.exports={BuyDialogRoot:"BuyDialog_BuyDialogRoot__N_bFI",BuyDialog:"BuyDialog_BuyDialog___K_5f",Body:"BuyDialog_Body__5RJc9",Detail:"BuyDialog_Detail__1yOEl",AxieDialog:"BuyDialog_AxieDialog__poOoc",Overlay:"BuyDialog_Overlay__NKqEC",Content:"BuyDialog_Content___o60a",Header:"BuyDialog_Header__ZHnaI",Title:"BuyDialog_Title__Nf9vO",SelectTokenSection:"BuyDialog_SelectTokenSection__BLX_S",ViewDetailSection:"BuyDialog_ViewDetailSection__AOU__",ViewDetailTrigger:"BuyDialog_ViewDetailTrigger__cbklB",TotalSection:"BuyDialog_TotalSection__O2S_e",Label:"BuyDialog_Label__Jo48P",BaseToken:"BuyDialog_BaseToken__7I9BF",BaseTokenPrice:"BuyDialog_BaseTokenPrice__hdd4d"}},76355:function(a){a.exports={Container:"ApproveToken_Container__Nc97w",Desc:"ApproveToken_Desc___xBi9",Trigger:"ApproveToken_Trigger__2lzn_",Content:"ApproveToken_Content__8M4dZ"}},8549:function(a){a.exports={Container:"AxieFigure_Container__bvvHR"}},8367:function(a){a.exports={Container:"DetailInfo_Container__nWk47",TotalSection:"DetailInfo_TotalSection__Cp34y",PayAsTitle:"DetailInfo_PayAsTitle__r34Xa",FeesTrigger:"DetailInfo_FeesTrigger__GKL1m",FeesDetail:"DetailInfo_FeesDetail__vVJSD"}},18049:function(a){a.exports={Container:"ErrorMessage_Container__pz_DP",Content:"ErrorMessage_Content__AQvOq",Message:"ErrorMessage_Message__XeNBg"}},29127:function(a){a.exports={Container:"FeesDetail_Container__69x2G",Item:"FeesDetail_Item__uH__F"}},28588:function(a){a.exports={Container:"FeeItem_Container__RONJ7",Label:"FeeItem_Label__7p122",Value:"FeeItem_Value__FfoCY"}},29324:function(a){a.exports={Container:"LiquidityFeeLabel_Container__9ZAn4",Trigger:"LiquidityFeeLabel_Trigger__Ij0e5",Content:"LiquidityFeeLabel_Content__bnMf6"}},65056:function(a){a.exports={Container:"SelectTokens_Container__tNRml",SelectedToken:"SelectTokens_SelectedToken__QL9hv",SymbolBalance:"SelectTokens_SymbolBalance__LH9Oz",ButtonContent:"SelectTokens_ButtonContent__lqE3Z"}},7280:function(a){a.exports={Container:"TotalSection_Container__Np1PQ",TotalValue:"TotalSection_TotalValue__1ho1T",ConvertedFeeRow:"TotalSection_ConvertedFeeRow__DS4L1",FeePercent:"TotalSection_FeePercent__pXbWG",TotalFiatValue:"TotalSection_TotalFiatValue__Oj_vJ",ExchangeRate:"TotalSection_ExchangeRate__hqCSE"}},72411:function(){},34640:function(){}}])